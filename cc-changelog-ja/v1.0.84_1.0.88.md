# Claude Code v1.0.84～1.0.88 機能追加まとめ

## 📌 v1.0.84 (2024年リリース)

### 🔧 主要な改善
- **🔍 ripgrep のビルトイン化**
  - デフォルトで内蔵版 ripgrep を使用
  - 無効化: `USE_BUILTIN_RIPGREP=0` を設定
  
- **📝 設定ファイル編集の改善**
  - `~/.claude/*` ファイルが自動補完候補に追加
  - エージェント・出力スタイル・スラッシュコマンドの編集が容易に
  
- **🌐 ネットワーク安定性向上**
  - 不安定な通信環境での `tool_use/tool_result` ID 不一致エラーを修正
  
- **🎯 リアルタイムステアリング改善**
  - タスク完了時にClaudeがステアリングを無視する問題を修正

## 📌 v1.0.85

### 🔧 新機能
- **💰 セッションコスト表示**
  - ステータスラインにセッション中のコスト情報が表示
  
- **🪝 SessionEnd フック**
  - セッション終了時に実行されるフックが追加

## 📌 v1.0.86

### 🔧 新機能
- **🔍 /context コマンド追加**
  - コンテキスト関連の問題をユーザーが自己診断できる新コマンド
  
- **🆔 SDK UUID サポート**
  - 全SDKメッセージでUUIDをサポート
  
- **🔄 SDK リプレイ機能**
  - `--replay-user-messages` オプションでユーザーメッセージを標準出力に再生

## 📌 v1.0.87
- （CHANGELOGに記載なし）

## 📌 v1.0.88

### 🔧 主要な改善
- **🔐 OAuth認証エラー修正**
  - "OAuth authentication is currently not supported" エラーを解決
  
- **📊 トークン超過表示**
  - ステータスラインに `exceeds_200k_tokens` インジケーター追加
  
- **💸 /cost の使用量追跡修正**
  - 誤った使用量トラッキングを修正
  
- **🤖 モデルエイリアス制御**
  - `ANTHROPIC_DEFAULT_SONNET_MODEL` 環境変数でSonnetモデルを制御
  - `ANTHROPIC_DEFAULT_OPUS_MODEL` 環境変数でOpusモデルを制御
  
- **☁️ Bedrock Sonnet 4対応**
  - デフォルトのSonnetモデルをSonnet 4に更新

---

## 🎯 ~/.claude/ 設定ファイル構造（v1.0.84で改善）

### ディレクトリ構成
```
~/.claude/
├── agents/           # サブエージェント定義
├── commands/         # カスタムスラッシュコマンド  
├── output-styles/    # 出力スタイル設定
└── hooks/           # フック設定
```

### 📁 agents/ - サブエージェント
特定タスク専用のAIエージェントを定義可能。

**作成例:**
```bash
mkdir -p ~/.claude/agents
cat > ~/.claude/agents/test-runner.md << 'EOF'
---
name: test-runner
description: テスト実行とエラー修正を自動実行
---

テスト駆動開発を徹底し、全テストをパスさせることに集中してください。
EOF
```

**使用方法:** `/agents` コマンドで管理・実行

### 📁 commands/ - カスタムスラッシュコマンド
独自のショートカットコマンドを作成。

**作成例:**
```bash
mkdir -p ~/.claude/commands
echo "このコードのセキュリティ脆弱性をレビューして:" > ~/.claude/commands/security-review.md
```

**使用方法:** `/security-review` で即座に実行

### 📁 output-styles/ - 出力スタイル
Claude Codeの応答スタイルをカスタマイズ。

**作成例:**
```bash
mkdir -p ~/.claude/output-styles
cat > ~/.claude/output-styles/concise-mode.md << 'EOF'
---
name: concise-mode
description: 極限まで簡潔な応答
---

# 簡潔モード
- 1-2文で回答
- コード以外の説明は最小限  
- 絵文字禁止
EOF
```

**使用方法:** `/output-style concise-mode` で切り替え

### 🚀 メリット
1. **タブ補完対応**: `~/.claude/` と入力すると自動的に候補表示
2. **即座に編集可能**: Claude Code内から直接編集
3. **プロジェクト横断**: 一度設定すれば全プロジェクトで利用可能
4. **バージョン管理**: gitで管理して設定を共有・バックアップ可能